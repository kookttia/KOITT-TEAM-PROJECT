<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
<meta charset="UTF-8">
    <title>Home</title>
 <script sec:authorize="isAnonymous()">
 	alert("갤럭시 S10+ 에 당첨되셨습니다. 회원가입 후 경품을 수령해주세요.");
	// document.querySelectorAll('.test').;
	 //document.querySelector('.test').onclick = conTest();
	 let tset = document.getElementById("test");
	 tset.onclick =conTest();
	 
	 document.querySelector('#test').onclick = function() { 
		    alert('bla bla'); 
		}

	
 	function conTest(){
 		console.log("자동");
 	}
 </script>
</head>
<body>
<div th:insert="layout/header"></div>
<h1> HOME </h1>

<div sec:authorize="isAuthenticated()">	
	타임리프 인증정보 :  <span sec:authentication="name"></span><br/>
	인증정보 2 : <span sec:authentication="principal.authorities"></span><br/>
	 
	 <h3>유저 정보</h3>
	  로그인 했음 : <span sec:authentication="name"></span> 
		<!-- <p th:if="${not #strings.isEmpty(session.userInfo.name)}"> 서버 런될때마다 세션사라져서 오류뜸. <span th:text="${session.userInfo.uIdx}"></span>-->
		 유저 인덱스:  [[${session.userInfo.uIdx}]]
		</p>
		<!-- <p th:if="${not #strings.isEmpty(session.userInfo.name)}"> <span th:text="${session.userInfo.name}"></span>-->
		 이름:  [[${session.userInfo.name}]]
		
		</p>
</div>

	<p>security 테스트 hello페이지 <a th:href="@{/hello}">클릭</a> 로그인하면 접속 가능</p>
		<h3 th:text="${hello}"> 컨트롤러 model param값 넘어오는지 확인.</h3>
		[[${login}]]
		
	
		<div class="test" id="test">
			붕
		</div>
</body>
</html>